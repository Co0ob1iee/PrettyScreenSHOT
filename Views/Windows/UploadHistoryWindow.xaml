<ui:FluentWindow x:Class="PrettyScreenSHOT.Views.Windows.UploadHistoryWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
        xmlns:helpers="clr-namespace:PrettyScreenSHOT.Helpers"
        Title="Historia uploadów"
        Height="600"
        Width="800"
        WindowStartupLocation="CenterScreen"
        ExtendsContentIntoTitleBar="True"
        WindowBackdropType="Mica"
        WindowCornerPreference="Round">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/> <!-- Title bar -->
            <RowDefinition Height="*"/>    <!-- Content -->
        </Grid.RowDefinitions>

        <!-- Title Bar -->
        <ui:TitleBar Title="Historia uploadów"
                     Icon="pack://application:,,,/app.ico"
                     Grid.Row="0"/>

        <!-- Main Content -->
        <Grid Grid.Row="1" Margin="20">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Header -->
            <StackPanel Grid.Row="0" Margin="0,0,0,16">
                <TextBlock Text="Ostatnie uploady"
                           FontSize="24"
                           FontWeight="SemiBold"
                           Margin="0,0,0,8"/>
                <TextBlock Text="Historia przesłanych zdjęć do chmury"
                           FontSize="14"
                           Opacity="0.7"/>
            </StackPanel>

            <!-- Upload List -->
            <ui:Card Grid.Row="1" Padding="0">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!-- List Header -->
                    <Border Grid.Row="0"
                            Background="{DynamicResource CardBackgroundFillColorDefaultBrush}"
                            Padding="16,12"
                            BorderBrush="{DynamicResource CardStrokeColorDefaultBrush}"
                            BorderThickness="0,0,0,1">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="60"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="150"/>
                                <ColumnDefinition Width="120"/>
                                <ColumnDefinition Width="180"/>
                            </Grid.ColumnDefinitions>

                            <TextBlock Grid.Column="0" Text="#" FontWeight="SemiBold" Opacity="0.7"/>
                            <TextBlock Grid.Column="1" Text="URL / Plik" FontWeight="SemiBold" Opacity="0.7"/>
                            <TextBlock Grid.Column="2" Text="Provider" FontWeight="SemiBold" Opacity="0.7"/>
                            <TextBlock Grid.Column="3" Text="Status" FontWeight="SemiBold" Opacity="0.7"/>
                            <TextBlock Grid.Column="4" Text="Akcje" FontWeight="SemiBold" Opacity="0.7"/>
                        </Grid>
                    </Border>

                    <!-- Upload Items List -->
                    <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
                        <ItemsControl x:Name="UploadItemsControl">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Border Padding="16,12"
                                            BorderBrush="{DynamicResource CardStrokeColorDefaultBrush}"
                                            BorderThickness="0,0,0,1">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="60"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="150"/>
                                                <ColumnDefinition Width="120"/>
                                                <ColumnDefinition Width="180"/>
                                            </Grid.ColumnDefinitions>

                                            <!-- Index -->
                                            <TextBlock Grid.Column="0"
                                                       Text="{Binding Index}"
                                                       VerticalAlignment="Center"
                                                       FontWeight="SemiBold"/>

                                            <!-- URL/Filename -->
                                            <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                                <TextBlock Text="{Binding Url}"
                                                           TextTrimming="CharacterEllipsis"
                                                           FontSize="13"
                                                           Margin="0,0,0,4"
                                                           Cursor="Hand"
                                                           MouseLeftButtonDown="OnUrlClick">
                                                    <TextBlock.Style>
                                                        <Style TargetType="TextBlock">
                                                            <Setter Property="Foreground" Value="{DynamicResource AccentTextFillColorPrimaryBrush}"/>
                                                            <Setter Property="TextDecorations" Value="None"/>
                                                            <Style.Triggers>
                                                                <Trigger Property="IsMouseOver" Value="True">
                                                                    <Setter Property="TextDecorations" Value="Underline"/>
                                                                </Trigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </TextBlock.Style>
                                                </TextBlock>
                                                <TextBlock Text="{Binding FileName}"
                                                           FontSize="11"
                                                           Opacity="0.6"/>
                                            </StackPanel>

                                            <!-- Provider -->
                                            <TextBlock Grid.Column="2"
                                                       Text="{Binding Provider}"
                                                       VerticalAlignment="Center"/>

                                            <!-- Status -->
                                            <StackPanel Grid.Column="3"
                                                        Orientation="Horizontal"
                                                        VerticalAlignment="Center"
                                                        helpers:StackPanelHelper.Spacing="8">
                                                <Border Background="{Binding StatusColor}"
                                                        Width="8"
                                                        Height="8"
                                                        CornerRadius="4"/>
                                                <TextBlock Text="{Binding Status}"
                                                           FontSize="12"/>
                                            </StackPanel>

                                            <!-- Actions -->
                                            <StackPanel Grid.Column="4"
                                                        Orientation="Horizontal"
                                                        helpers:StackPanelHelper.Spacing="4">
                                                <ui:Button Icon="Copy24"
                                                           ToolTip="Kopiuj URL"
                                                           Click="OnCopyUrlClick"
                                                           Tag="{Binding}"
                                                           Width="36"
                                                           Height="36"
                                                           Appearance="Secondary"/>
                                                <ui:Button Icon="ArrowSync24"
                                                           ToolTip="Prześlij ponownie"
                                                           Click="OnReuploadClick"
                                                           Tag="{Binding}"
                                                           Width="36"
                                                           Height="36"
                                                           Appearance="Secondary"/>
                                                <ui:Button Icon="Open24"
                                                           ToolTip="Otwórz w przeglądarce"
                                                           Click="OnOpenInBrowserClick"
                                                           Tag="{Binding}"
                                                           Width="36"
                                                           Height="36"
                                                           Appearance="Secondary"/>
                                            </StackPanel>
                                        </Grid>
                                    </Border>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </ScrollViewer>

                    <!-- Empty State -->
                    <StackPanel x:Name="EmptyState"
                                Grid.Row="1"
                                VerticalAlignment="Center"
                                HorizontalAlignment="Center"
                                Visibility="Collapsed">
                        <ui:SymbolIcon Symbol="CloudArrowUp24"
                                       FontSize="64"
                                       Opacity="0.3"
                                       HorizontalAlignment="Center"
                                       Margin="0,0,0,16"/>
                        <TextBlock Text="Brak historii uploadów"
                                   FontSize="18"
                                   FontWeight="SemiBold"
                                   HorizontalAlignment="Center"
                                   Margin="0,0,0,8"/>
                        <TextBlock Text="Twoje przesłane zdjęcia pojawią się tutaj"
                                   FontSize="14"
                                   Opacity="0.6"
                                   HorizontalAlignment="Center"/>
                    </StackPanel>
                </Grid>
            </ui:Card>
        </Grid>
    </Grid>
</ui:FluentWindow>
