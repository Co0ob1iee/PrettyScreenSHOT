<Window x:Class="PrettyScreenSHOT.Views.Windows.ScreenshotEditorWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Screenshot Editor" Height="800" Width="1200" WindowStartupLocation="CenterScreen"
        Background="Transparent" Foreground="{StaticResource NeumorphicTextBrush}"
        WindowStyle="None" AllowsTransparency="True">
    
    <!-- Resources MUSZA BYC NA POCZATKU -->
    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/PrettyScreenSHOT;component/NeumorphicStyles.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Window.Resources>
    
    <!-- Neumorphic window chrome -->
    <Border Style="{StaticResource NeumorphicPanel}" CornerRadius="18" Margin="12" Padding="0">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="48"/> <!-- Title bar -->
                <RowDefinition Height="*"/>  <!-- Main content -->
            </Grid.RowDefinitions>

            <!-- Custom Title Bar -->
            <Border Grid.Row="0" Background="Transparent" Padding="10,8" CornerRadius="16,16,0,0" MouseLeftButtonDown="OnTitleBarMouseDown">
                <DockPanel LastChildFill="True">
                    <TextBlock Text="Modern" FontSize="18" FontWeight="Bold" Foreground="{StaticResource NeumorphicTextBrush}" VerticalAlignment="Center" DockPanel.Dock="Left"/>

                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" DockPanel.Dock="Right">
                        <Button Style="{StaticResource NeumorphicCircularButton}" Width="36" Height="36" Margin="6" ToolTip="Copy">
                            <TextBlock Text="ðŸ“‹" FontSize="14" VerticalAlignment="Center" HorizontalAlignment="Center"/>
                        </Button>
                        <Button Style="{StaticResource NeumorphicCircularButton}" Width="36" Height="36" Margin="6" ToolTip="Duplicate">
                            <TextBlock Text="ðŸ“„" FontSize="14" VerticalAlignment="Center" HorizontalAlignment="Center"/>
                        </Button>
                        <Button Click="OnCancelClick" Style="{StaticResource NeumorphicCircularButton}" Width="36" Height="36" Margin="6" ToolTip="Close">
                            <TextBlock Text="â¤´" FontSize="14" VerticalAlignment="Center" HorizontalAlignment="Center"/>
                        </Button>
                    </StackPanel>
                </DockPanel>
            </Border>

            <!-- Existing layout placed into grid row 1 -->
            <Grid Grid.Row="1">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>  <!-- Lewa pionowa paleta systemowa -->
                    <ColumnDefinition Width="*"/>     <!-- GÅ‚Ã³wny obszar edycji -->
                    <ColumnDefinition Width="Auto"/>  <!-- Prawa pionowa paleta narzÄ™dzi -->
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>       <!-- GÅ‚Ã³wny obszar -->
                    <RowDefinition Height="Auto"/>    <!-- Dolny pasek formatowania tekstu -->
                </Grid.RowDefinitions>

                <!-- Lewa pionowa paleta narzÄ™dzi systemowych -->
                <Border Grid.Column="0" Grid.Row="0" Grid.RowSpan="2" 
                        Style="{StaticResource NeumorphicPanel}" 
                        Margin="10" Padding="8" Width="70">
                    <StackPanel Orientation="Vertical" VerticalAlignment="Top" HorizontalAlignment="Center">
                        <!-- Ikony systemowe -->
                        <Button Style="{StaticResource NeumorphicCircularButton}" ToolTip="WiFi" Margin="0,5">
                            <TextBlock Text="ðŸ“¶" FontSize="20"/>
                        </Button>
                        <Button Style="{StaticResource NeumorphicCircularButton}" ToolTip="Bateria" Margin="0,5">
                            <TextBlock Text="ðŸ”‹" FontSize="20"/>
                        </Button>
                        <Button Style="{StaticResource NeumorphicCircularButton}" ToolTip="Telefon" Margin="0,5">
                            <TextBlock Text="ðŸ“ž" FontSize="20"/>
                        </Button>
                        <Button Style="{StaticResource NeumorphicCircularButton}" ToolTip="UdostÄ™pnij" Margin="0,5">
                            <TextBlock Text="ðŸ“¤" FontSize="20"/>
                        </Button>
                        <Button Style="{StaticResource NeumorphicCircularButton}" ToolTip="GÅ‚oÅ›noÅ›Ä‡" Margin="0,5">
                            <TextBlock Text="ðŸ”Š" FontSize="20"/>
                        </Button>
                    </StackPanel>
                </Border>

                <!-- GÅ‚Ã³wny obszar edycji -->
                <Grid Grid.Column="1" Grid.Row="0" Margin="5,10,5,5">
                    <!-- Canvas do edycji screenshot -->
                    <Canvas x:Name="EditorCanvas" Background="White" 
                            MouseDown="OnEditorCanvasMouseDown" 
                            MouseMove="OnEditorCanvasMouseMove" 
                            MouseUp="OnEditorCanvasMouseUp">
                    </Canvas>
                    
                    <!-- GÃ³rny pasek z akcjami -->
                    <Border DockPanel.Dock="Top" Style="{StaticResource NeumorphicPanel}" 
                            Margin="10" Padding="12" HorizontalAlignment="Stretch" VerticalAlignment="Top">
                        <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                            <!-- Color Picker -->
                            <TextBlock Text="KOLOR:" Style="{StaticResource NeumorphicTextBlockSecondary}" 
                                       VerticalAlignment="Center" Margin="0,0,10,0"/>
                            <Button x:Name="ColorButton" Click="OnColorPickerClick" 
                                    Width="40" Height="35" Background="#FF0000" ToolTip="Zmien kolor" 
                                    Style="{StaticResource NeumorphicRaisedButton}" Padding="0" Margin="5"/>
                            
                            <Separator Style="{StaticResource {x:Static ToolBar.SeparatorStyleKey}}"
                                      Margin="15,0" Background="{StaticResource NeumorphicDarkShadowBrush}" Opacity="0.3"/>
                            
                            <!-- Size Slider -->
                            <TextBlock Text="GRUBOSÄ†:" Style="{StaticResource NeumorphicTextBlockSecondary}" 
                                       VerticalAlignment="Center" Margin="10,0,10,0"/>
                            <Slider x:Name="SizeSlider" Width="100" Minimum="1" Maximum="30" Value="3" 
                                    VerticalAlignment="Center" Style="{StaticResource NeumorphicSlider}"
                                    ValueChanged="SizeSlider_ValueChanged"/>
                            <TextBlock x:Name="SizeLabel" Text="3px" 
                                       Style="{StaticResource NeumorphicTextBlockSecondary}" 
                                       VerticalAlignment="Center" Margin="5,0,10,0"/>
                            
                            <Separator Style="{StaticResource {x:Static ToolBar.SeparatorStyleKey}}"
                                      Margin="15,0" Background="{StaticResource NeumorphicDarkShadowBrush}" Opacity="0.3"/>
                            
                            <!-- Action Buttons -->
                            <Button Click="OnClearClick" Style="{StaticResource NeumorphicRaisedButton}" 
                                    ToolTip="WyczyÅ›Ä‡ wszystko" Margin="5">
                                <TextBlock Text="WYCZYÅšÄ†" Style="{StaticResource NeumorphicTextBlock}"/>
                            </Button>

                            <Button Click="OnUndoClick" Style="{StaticResource NeumorphicRaisedButton}" 
                                    ToolTip="Cofnij ostatniÄ… akcjÄ™" Margin="5">
                                <TextBlock Text="COFNIJ" Style="{StaticResource NeumorphicTextBlock}"/>
                            </Button>
                            
                            <Separator Style="{StaticResource {x:Static ToolBar.SeparatorStyleKey}}"
                                      Margin="15,0" Background="{StaticResource NeumorphicDarkShadowBrush}" Opacity="0.3"/>
                            
                            <Button Click="OnUploadClick" Style="{StaticResource NeumorphicRaisedButton}" 
                                    ToolTip="PrzeÅ›lij do chmury" Margin="5">
                                <TextBlock Text="CHMURA" Style="{StaticResource NeumorphicTextBlock}"/>
                            </Button>

                            <Button Click="OnSaveClick" Style="{StaticResource NeumorphicRaisedButton}" 
                                    ToolTip="Zapisz screenshot" Margin="5">
                                <TextBlock Text="ZAPISZ" Style="{StaticResource NeumorphicTextBlock}"/>
                            </Button>

                            <Button Click="OnCancelClick" Style="{StaticResource NeumorphicRaisedButton}" 
                                    ToolTip="Anuluj bez zapisu" Margin="5">
                                <TextBlock Text="ANULUJ" Style="{StaticResource NeumorphicTextBlock}"/>
                            </Button>
                        </StackPanel>
                    </Border>
                </Grid>

                <!-- Prawa pionowa paleta narzÄ™dzi edycji -->
                <Border Grid.Column="2" Grid.Row="0" 
                        Style="{StaticResource NeumorphicPanel}" 
                        Margin="10,10,10,5" Padding="8" Width="80">
                    <StackPanel Orientation="Vertical" VerticalAlignment="Top" HorizontalAlignment="Center">
                        <TextBlock Text="NARZÄ˜DZIA" Style="{StaticResource NeumorphicTextBlockSecondary}" 
                                   FontWeight="Bold" Margin="0,0,0,10" HorizontalAlignment="Center"/>
                        
                        <!-- Drawing Tools -->
                        <Button Tag="marker" Click="OnToolButtonClick" 
                                Style="{StaticResource NeumorphicRaisedButton}" 
                                ToolTip="Marker - Rysuj" Width="50" Height="50" Margin="0,5">
                            <Image Source="/Assets/Icons/Tools/marker.png" Stretch="Uniform" Width="24" Height="24"/>
                        </Button>

                        <Button Tag="rectangle" Click="OnToolButtonClick" 
                                Style="{StaticResource NeumorphicRaisedButton}" 
                                ToolTip="ProstokÄ…t" Width="50" Height="50" Margin="0,5">
                            <Image Source="/Assets/Icons/Tools/zaznaczenie_prostokat.png" Stretch="Uniform" Width="24" Height="24"/>
                        </Button>

                        <Button Tag="arrow" Click="OnToolButtonClick" 
                                Style="{StaticResource NeumorphicRaisedButton}" 
                                ToolTip="StrzaÅ‚ka" Width="50" Height="50" Margin="0,5">
                            <Image Source="/Assets/Icons/Tools/icon_arrow.png" Stretch="Uniform" Width="24" Height="24"/>
                        </Button>

                        <Button Tag="blur" Click="OnToolButtonClick" 
                                Style="{StaticResource NeumorphicRaisedButton}" 
                                ToolTip="Blur - Zamazywanie" Width="50" Height="50" Margin="0,5">
                            <Image Source="/Assets/Icons/Tools/icon_blur.png" Stretch="Uniform" Width="24" Height="24"/>
                        </Button>

                        <Button Tag="text" Click="OnToolButtonClick" 
                                Style="{StaticResource NeumorphicRaisedButton}" 
                                ToolTip="Tekst" Width="50" Height="50" Margin="0,5">
                            <Image Source="/Assets/Icons/Tools/icon_text.png" Stretch="Uniform" Width="24" Height="24"/>
                        </Button>
                    </StackPanel>
                </Border>

                <!-- Dolny pasek formatowania tekstu -->
                <Border Grid.Column="1" Grid.ColumnSpan="2" Grid.Row="1" 
                        Style="{StaticResource NeumorphicPanel}" 
                        Margin="5,0,10,10" Padding="12">
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                        <TextBlock Text="FORMATOWANIE TEKSTU:" Style="{StaticResource NeumorphicTextBlockSecondary}" 
                                   FontWeight="Bold" Margin="0,0,15,0" VerticalAlignment="Center"/>
                        
                        <!-- Style tekstu -->
                        <Button Style="{StaticResource NeumorphicRaisedButton}" 
                                ToolTip="Pogrubiony" Width="35" Height="35" Margin="3">
                            <TextBlock Text="B" FontWeight="Bold" Style="{StaticResource NeumorphicTextBlock}"/>
                        </Button>
                        <Button Style="{StaticResource NeumorphicRaisedButton}" 
                                ToolTip="Kursywa" Width="35" Height="35" Margin="3">
                            <TextBlock Text="I" FontStyle="Italic" Style="{StaticResource NeumorphicTextBlock}"/>
                        </Button>
                        <Button Style="{StaticResource NeumorphicRaisedButton}" 
                                ToolTip="PodkreÅ›lenie" Width="35" Height="35" Margin="3">
                            <TextBlock Text="U" TextDecorations="Underline" Style="{StaticResource NeumorphicTextBlock}"/>
                        </Button>
                        <Button Style="{StaticResource NeumorphicRaisedButton}" 
                                ToolTip="PrzekreÅ›lenie" Width="35" Height="35" Margin="3">
                            <TextBlock Text="S" TextDecorations="Strikethrough" Style="{StaticResource NeumorphicTextBlock}"/>
                        </Button>
                        
                        <Separator Style="{StaticResource {x:Static ToolBar.SeparatorStyleKey}}" 
                                  Margin="10,0" Background="#D0D0D0" Opacity="0.5"/>
                        
                        <!-- WyrÃ³wnanie tekstu -->
                        <Button Style="{StaticResource NeumorphicRaisedButton}" 
                                ToolTip="WyrÃ³wnaj do lewej" Width="35" Height="35" Margin="3">
                            <TextBlock Text="â—€" Style="{StaticResource NeumorphicTextBlock}" FontSize="16"/>
                        </Button>
                        <Button Style="{StaticResource NeumorphicRaisedButton}" 
                                ToolTip="WyÅ›rodkuj" Width="35" Height="35" Margin="3">
                            <TextBlock Text="â¬¤" Style="{StaticResource NeumorphicTextBlock}" FontSize="12"/>
                        </Button>
                        <Button Style="{StaticResource NeumorphicRaisedButton}" 
                                ToolTip="WyrÃ³wnaj do prawej" Width="35" Height="35" Margin="3">
                            <TextBlock Text="â–¶" Style="{StaticResource NeumorphicTextBlock}" FontSize="16"/>
                        </Button>
                        <Button Style="{StaticResource NeumorphicRaisedButton}" 
                                ToolTip="Wyjustuj" Width="35" Height="35" Margin="3">
                            <TextBlock Text="â¬Œ" Style="{StaticResource NeumorphicTextBlock}" FontSize="14"/>
                        </Button>
                        
                        <Separator Style="{StaticResource {x:Static ToolBar.SeparatorStyleKey}}" 
                                  Margin="10,0" Background="#D0D0D0" Opacity="0.5"/>
                        
                        <!-- Listy -->
                        <Button Style="{StaticResource NeumorphicRaisedButton}" 
                                ToolTip="Lista punktowana" Width="35" Height="35" Margin="3">
                            <TextBlock Text="â€¢" Style="{StaticResource NeumorphicTextBlock}" FontSize="20"/>
                        </Button>
                        <Button Style="{StaticResource NeumorphicRaisedButton}" 
                                ToolTip="Lista numerowana" Width="35" Height="35" Margin="3">
                            <TextBlock Text="1." Style="{StaticResource NeumorphicTextBlock}"/>
                        </Button>
                    </StackPanel>
                </Border>
            </Grid>
        </Grid>
    </Border>
</Window>
