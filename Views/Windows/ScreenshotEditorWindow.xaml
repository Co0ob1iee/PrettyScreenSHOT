<ui:FluentWindow x:Class="PrettyScreenSHOT.Views.Windows.ScreenshotEditorWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
        xmlns:helpers="clr-namespace:PrettyScreenSHOT.Helpers"
        Title="Screenshot Editor"
        Height="800"
        Width="1200"
        WindowStartupLocation="CenterScreen"
        ExtendsContentIntoTitleBar="True"
        WindowBackdropType="Mica"
        WindowCornerPreference="Round">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/> <!-- Title bar -->
            <RowDefinition Height="*"/>    <!-- Main content -->
        </Grid.RowDefinitions>

        <!-- Title Bar with Quick Actions -->
        <Grid Grid.Row="0">
            <ui:TitleBar Title="Screenshot Editor"
                         Icon="pack://application:,,,/app.ico">
                <ui:TitleBar.Header>
                    <StackPanel Orientation="Horizontal" Margin="8,0,0,0" helpers:StackPanelHelper.Spacing="4">
                        <ui:Button Icon="Copy24"
                                   Appearance="Transparent"
                                   ToolTip="Copy"
                                   Padding="8"/>
                        <ui:Button Icon="DocumentCopy24"
                                   Appearance="Transparent"
                                   ToolTip="Duplicate"
                                   Padding="8"/>
                    </StackPanel>
                </ui:TitleBar.Header>
            </ui:TitleBar>
        </Grid>

        <!-- Main Editor Layout -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>  <!-- Lewa pionowa paleta systemowa -->
                <ColumnDefinition Width="*"/>     <!-- Główny obszar edycji -->
                <ColumnDefinition Width="Auto"/>  <!-- Prawa pionowa paleta narzędzi -->
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>       <!-- Główny obszar -->
                <RowDefinition Height="Auto"/>    <!-- Dolny pasek formatowania tekstu -->
            </Grid.RowDefinitions>

            <!-- Lewa pionowa paleta narzędzi systemowych -->
            <ui:Card Grid.Column="0"
                     Grid.Row="0"
                     Grid.RowSpan="2"
                     Margin="12,12,8,12"
                     Padding="8"
                     MinWidth="70">
                <StackPanel Orientation="Vertical"
                            VerticalAlignment="Top"
                            HorizontalAlignment="Center"
                            helpers:StackPanelHelper.Spacing="8">
                    <ui:Button Icon="Wifi124"
                               Appearance="Secondary"
                               ToolTip="WiFi"/>
                    <ui:Button Icon="BatteryCharge24"
                               Appearance="Secondary"
                               ToolTip="Bateria"/>
                    <ui:Button Icon="Phone24"
                               Appearance="Secondary"
                               ToolTip="Telefon"/>
                    <ui:Button Icon="Share24"
                               Appearance="Secondary"
                               ToolTip="Udostępnij"/>
                    <ui:Button Icon="Speaker224"
                               Appearance="Secondary"
                               ToolTip="Głośność"/>
                </StackPanel>
            </ui:Card>

            <!-- Główny obszar edycji -->
            <Grid Grid.Column="1" Grid.Row="0" Margin="0,12,0,8">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/> <!-- Top toolbar -->
                    <RowDefinition Height="*"/>    <!-- Canvas -->
                </Grid.RowDefinitions>

                <!-- Górny pasek z akcjami -->
                <ui:Card Grid.Row="0" Margin="0,0,0,12" Padding="12">
                    <StackPanel Orientation="Horizontal" helpers:StackPanelHelper.Spacing="8">
                        <!-- Color Picker -->
                        <TextBlock Text="KOLOR:"
                                   VerticalAlignment="Center"
                                   FontWeight="SemiBold"
                                   Margin="0,0,4,0"/>
                        <Button x:Name="ColorButton"
                                Click="OnColorPickerClick"
                                Width="40"
                                Height="32"
                                Background="#FF0000"
                                ToolTip="Zmien kolor"
                                Padding="0"/>

                        <Border Width="1"
                                Background="{DynamicResource CardStrokeColorDefaultBrush}"
                                Margin="8,0"/>

                        <!-- Size Slider -->
                        <TextBlock Text="GRUBOŚĆ:"
                                   VerticalAlignment="Center"
                                   FontWeight="SemiBold"
                                   Margin="0,0,4,0"/>
                        <Slider x:Name="SizeSlider"
                                Width="100"
                                Minimum="1"
                                Maximum="30"
                                Value="3"
                                VerticalAlignment="Center"
                                ValueChanged="SizeSlider_ValueChanged"/>
                        <TextBlock x:Name="SizeLabel"
                                   Text="3px"
                                   VerticalAlignment="Center"
                                   MinWidth="35"/>

                        <Border Width="1"
                                Background="{DynamicResource CardStrokeColorDefaultBrush}"
                                Margin="8,0"/>

                        <!-- Action Buttons -->
                        <ui:Button Content="WYCZYŚĆ"
                                   Click="OnClearClick"
                                   Icon="Broom24"
                                   ToolTip="Wyczyść wszystko"/>

                        <ui:Button Content="COFNIJ"
                                   Click="OnUndoClick"
                                   Icon="ArrowUndo24"
                                   ToolTip="Cofnij ostatnią akcję"/>

                        <Border Width="1"
                                Background="{DynamicResource CardStrokeColorDefaultBrush}"
                                Margin="8,0"/>

                        <ui:Button Content="CHMURA"
                                   Click="OnUploadClick"
                                   Icon="Cloud24"
                                   ToolTip="Prześlij do chmury"/>

                        <ui:Button Content="ZAPISZ"
                                   Click="OnSaveClick"
                                   Icon="Save24"
                                   Appearance="Primary"
                                   ToolTip="Zapisz screenshot"/>

                        <ui:Button Content="ANULUJ"
                                   Click="OnCancelClick"
                                   Icon="Dismiss24"
                                   ToolTip="Anuluj bez zapisu"/>
                    </StackPanel>
                </ui:Card>

                <!-- Canvas do edycji screenshot -->
                <Border Grid.Row="1"
                        Background="White"
                        CornerRadius="4"
                        BorderThickness="1"
                        BorderBrush="{DynamicResource CardStrokeColorDefaultBrush}">
                    <Canvas x:Name="EditorCanvas"
                            Background="White"
                            MouseDown="OnEditorCanvasMouseDown"
                            MouseMove="OnEditorCanvasMouseMove"
                            MouseUp="OnEditorCanvasMouseUp"/>
                </Border>
            </Grid>

            <!-- Prawa pionowa paleta narzędzi edycji -->
            <ui:Card Grid.Column="2"
                     Grid.Row="0"
                     Margin="8,12,12,8"
                     Padding="8"
                     MinWidth="80">
                <StackPanel Orientation="Vertical"
                            VerticalAlignment="Top"
                            HorizontalAlignment="Center"
                            helpers:StackPanelHelper.Spacing="8">
                    <TextBlock Text="NARZĘDZIA"
                               FontWeight="SemiBold"
                               FontSize="12"
                               HorizontalAlignment="Center"
                               Margin="0,0,0,4"/>

                    <!-- Drawing Tools -->
                    <ui:Button Tag="marker"
                               Click="OnToolButtonClick"
                               ToolTip="Marker - Rysuj"
                               Width="56"
                               Height="56"
                               Padding="0">
                        <Image Source="/Assets/Icons/Tools/marker.png"
                               Stretch="Uniform"
                               Width="28"
                               Height="28"/>
                    </ui:Button>

                    <ui:Button Tag="rectangle"
                               Click="OnToolButtonClick"
                               ToolTip="Prostokąt"
                               Width="56"
                               Height="56"
                               Padding="0">
                        <Image Source="/Assets/Icons/Tools/zaznaczenie_prostokat.png"
                               Stretch="Uniform"
                               Width="28"
                               Height="28"/>
                    </ui:Button>

                    <ui:Button Tag="arrow"
                               Click="OnToolButtonClick"
                               ToolTip="Strzałka"
                               Width="56"
                               Height="56"
                               Padding="0">
                        <Image Source="/Assets/Icons/Tools/icon_arrow.png"
                               Stretch="Uniform"
                               Width="28"
                               Height="28"/>
                    </ui:Button>

                    <ui:Button Tag="blur"
                               Click="OnToolButtonClick"
                               ToolTip="Blur - Zamazywanie"
                               Width="56"
                               Height="56"
                               Padding="0">
                        <Image Source="/Assets/Icons/Tools/icon_blur.png"
                               Stretch="Uniform"
                               Width="28"
                               Height="28"/>
                    </ui:Button>

                    <ui:Button Tag="text"
                               Click="OnToolButtonClick"
                               ToolTip="Tekst"
                               Width="56"
                               Height="56"
                               Padding="0">
                        <Image Source="/Assets/Icons/Tools/icon_text.png"
                               Stretch="Uniform"
                               Width="28"
                               Height="28"/>
                    </ui:Button>
                </StackPanel>
            </ui:Card>

            <!-- Dolny pasek formatowania tekstu -->
            <ui:Card Grid.Column="1"
                     Grid.ColumnSpan="2"
                     Grid.Row="1"
                     Margin="0,0,12,12"
                     Padding="12">
                <StackPanel Orientation="Horizontal" helpers:StackPanelHelper.Spacing="8">
                    <TextBlock Text="FORMATOWANIE TEKSTU:"
                               FontWeight="SemiBold"
                               VerticalAlignment="Center"
                               Margin="0,0,8,0"/>

                    <!-- Style tekstu -->
                    <ui:Button ToolTip="Pogrubiony"
                               Width="36"
                               Height="36"
                               Padding="0">
                        <TextBlock Text="B" FontWeight="Bold"/>
                    </ui:Button>
                    <ui:Button ToolTip="Kursywa"
                               Width="36"
                               Height="36"
                               Padding="0">
                        <TextBlock Text="I" FontStyle="Italic"/>
                    </ui:Button>
                    <ui:Button ToolTip="Podkreślenie"
                               Width="36"
                               Height="36"
                               Padding="0">
                        <TextBlock Text="U" TextDecorations="Underline"/>
                    </ui:Button>
                    <ui:Button ToolTip="Przekreślenie"
                               Width="36"
                               Height="36"
                               Padding="0">
                        <TextBlock Text="S" TextDecorations="Strikethrough"/>
                    </ui:Button>

                    <Border Width="1"
                            Background="{DynamicResource CardStrokeColorDefaultBrush}"
                            Margin="4,0"/>

                    <!-- Wyrównanie tekstu -->
                    <ui:Button Icon="TextAlignLeft24"
                               ToolTip="Wyrównaj do lewej"
                               Width="36"
                               Height="36"/>
                    <ui:Button Icon="TextAlignCenter24"
                               ToolTip="Wyśrodkuj"
                               Width="36"
                               Height="36"/>
                    <ui:Button Icon="TextAlignRight24"
                               ToolTip="Wyrównaj do prawej"
                               Width="36"
                               Height="36"/>
                    <ui:Button Icon="TextAlignJustify24"
                               ToolTip="Wyjustuj"
                               Width="36"
                               Height="36"/>

                    <Border Width="1"
                            Background="{DynamicResource CardStrokeColorDefaultBrush}"
                            Margin="4,0"/>

                    <!-- Listy -->
                    <ui:Button Icon="TextBulletListLtr24"
                               ToolTip="Lista punktowana"
                               Width="36"
                               Height="36"/>
                    <ui:Button Icon="TextNumberListLtr24"
                               ToolTip="Lista numerowana"
                               Width="36"
                               Height="36"/>
                </StackPanel>
            </ui:Card>
        </Grid>
    </Grid>
</ui:FluentWindow>
