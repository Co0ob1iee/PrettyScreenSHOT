<ui:FluentWindow x:Class="PrettyScreenSHOT.Views.Windows.VideoCaptureWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
        Title="Video Capture"
        Height="400"
        Width="520"
        WindowStartupLocation="CenterScreen"
        ShowInTaskbar="False"
        ResizeMode="NoResize"
        ExtendsContentIntoTitleBar="True"
        WindowBackdropType="Mica"
        WindowCornerPreference="Round">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/> <!-- Title bar -->
            <RowDefinition Height="*"/>    <!-- Main content -->
        </Grid.RowDefinitions>

        <!-- Title Bar -->
        <ui:TitleBar Grid.Row="0"
                     Title="Video Capture"
                     Icon="pack://application:,,,/app.ico"
                     ShowMaximize="False"/>

        <!-- Main Content -->
        <Grid Grid.Row="1" Margin="20,12,20,20">
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>    <!-- Content -->
                <RowDefinition Height="Auto"/> <!-- Buttons -->
            </Grid.RowDefinitions>

            <!-- Content -->
            <ui:Card Grid.Row="0" Padding="16">
                <StackPanel Spacing="16">
                    <TextBlock x:Name="StatusText"
                               Text="Ready to record"
                               FontSize="14"
                               Foreground="{DynamicResource TextFillColorSecondaryBrush}"/>

                    <!-- Recording Area -->
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="150"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Text="Recording Area:"/>
                        <TextBlock Grid.Column="1" x:Name="AreaText" Text="Not selected"/>
                    </Grid>

                    <!-- Frame Rate -->
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="150"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Text="Frame Rate:"/>
                        <StackPanel Grid.Column="1" Orientation="Horizontal" Spacing="12">
                            <Slider x:Name="FrameRateSlider"
                                    Width="200"
                                    Minimum="1"
                                    Maximum="30"
                                    Value="10"
                                    VerticalAlignment="Center"
                                    ValueChanged="FrameRateSlider_ValueChanged"/>
                            <TextBlock x:Name="FrameRateLabel"
                                       Text="10 FPS"
                                       MinWidth="60"
                                       VerticalAlignment="Center"/>
                        </StackPanel>
                    </Grid>

                    <!-- Format -->
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="150"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Text="Format:"/>
                        <ComboBox Grid.Column="1"
                                  x:Name="FormatComboBox"
                                  SelectedIndex="0">
                            <ComboBoxItem Content="GIF"/>
                            <ComboBoxItem Content="MP4"/>
                        </ComboBox>
                    </Grid>

                    <!-- Recording Time (hidden by default) -->
                    <Grid x:Name="RecordingInfoGrid" Visibility="Collapsed">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="150"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Text="Recording Time:"/>
                        <TextBlock Grid.Column="1"
                                   x:Name="TimeText"
                                   Text="00:00"
                                   FontSize="18"
                                   FontWeight="Bold"
                                   Foreground="{DynamicResource AccentTextFillColorPrimaryBrush}"/>
                    </Grid>

                    <!-- Frames Count (hidden by default) -->
                    <Grid x:Name="FramesInfoGrid" Visibility="Collapsed">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="150"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Text="Frames Captured:"/>
                        <TextBlock Grid.Column="1"
                                   x:Name="FramesText"
                                   Text="0"
                                   FontSize="14"/>
                    </Grid>
                </StackPanel>
            </ui:Card>

            <!-- Action Buttons -->
            <StackPanel Grid.Row="1"
                        Orientation="Horizontal"
                        HorizontalAlignment="Right"
                        Spacing="8"
                        Margin="0,16,0,0">
                <ui:Button x:Name="StartButton"
                           Content="Start Recording"
                           Click="StartButton_Click"
                           Icon="Record24"
                           Appearance="Primary"
                           MinWidth="150"/>
                <ui:Button x:Name="StopButton"
                           Content="Stop Recording"
                           Click="StopButton_Click"
                           Icon="Stop24"
                           IsEnabled="False"
                           MinWidth="150"/>
                <ui:Button x:Name="CancelButton"
                           Content="Cancel"
                           Click="CancelButton_Click"
                           Icon="Dismiss24"
                           MinWidth="100"/>
            </StackPanel>
        </Grid>
    </Grid>
</ui:FluentWindow>
