<ui:FluentWindow x:Class="PrettyScreenSHOT.UpdateWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
        Title="Update Available"
        Height="550"
        Width="620"
        WindowStartupLocation="CenterScreen"
        ShowInTaskbar="True"
        ResizeMode="NoResize"
        ExtendsContentIntoTitleBar="True"
        WindowBackdropType="Mica"
        WindowCornerPreference="Round">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/> <!-- Title bar -->
            <RowDefinition Height="*"/>    <!-- Main content -->
        </Grid.RowDefinitions>

        <!-- Title Bar -->
        <ui:TitleBar Grid.Row="0"
                     Title="Update Available"
                     Icon="pack://application:,,,/app.ico"
                     ShowMaximize="False"/>

        <!-- Main Content -->
        <Grid Grid.Row="1" Margin="20,12,20,20">
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>    <!-- Content -->
                <RowDefinition Height="Auto"/> <!-- Buttons -->
            </Grid.RowDefinitions>

            <!-- Content -->
            <ScrollViewer Grid.Row="0" VerticalScrollBarVisibility="Auto">
                <StackPanel Spacing="16">
                    <!-- Subtitle -->
                    <TextBlock x:Name="SubtitleText"
                               Text="A new version is available!"
                               FontSize="14"
                               Foreground="{DynamicResource TextFillColorSecondaryBrush}"/>

                    <!-- Version Info Card -->
                    <ui:Card Padding="16">
                        <StackPanel Spacing="12">
                            <TextBlock Text="Version Information"
                                       FontSize="15"
                                       FontWeight="SemiBold"/>

                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="150"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" Text="Current Version:"/>
                                <TextBlock Grid.Column="1" x:Name="CurrentVersionText" Text="1.0.0"/>
                            </Grid>

                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="150"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" Text="New Version:"/>
                                <TextBlock Grid.Column="1"
                                           x:Name="NewVersionText"
                                           Text="1.1.0"
                                           FontSize="16"
                                           FontWeight="Bold"
                                           Foreground="{DynamicResource AccentTextFillColorPrimaryBrush}"/>
                            </Grid>

                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="150"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" Text="Release Date:"/>
                                <TextBlock Grid.Column="1" x:Name="ReleaseDateText" Text="2024-01-15"/>
                            </Grid>

                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="150"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" Text="File Size:"/>
                                <TextBlock Grid.Column="1" x:Name="FileSizeText" Text="15.2 MB"/>
                            </Grid>
                        </StackPanel>
                    </ui:Card>

                    <!-- Release Notes Card -->
                    <ui:Card Padding="16">
                        <StackPanel Spacing="8">
                            <TextBlock Text="Release Notes"
                                       FontSize="14"
                                       FontWeight="SemiBold"/>
                            <Border BorderThickness="1"
                                    BorderBrush="{DynamicResource CardStrokeColorDefaultBrush}"
                                    CornerRadius="4"
                                    Background="{DynamicResource CardBackgroundFillColorDefaultBrush}"
                                    Padding="12"
                                    MaxHeight="200">
                                <ScrollViewer VerticalScrollBarVisibility="Auto">
                                    <TextBlock x:Name="ReleaseNotesText"
                                               TextWrapping="Wrap"
                                               Text="Loading release notes..."
                                               Foreground="{DynamicResource TextFillColorSecondaryBrush}"/>
                                </ScrollViewer>
                            </Border>
                        </StackPanel>
                    </ui:Card>

                    <!-- Download Progress (hidden by default) -->
                    <ui:Card x:Name="ProgressPanel"
                             Visibility="Collapsed"
                             Padding="16">
                        <StackPanel Spacing="8">
                            <TextBlock Text="Downloading update..."
                                       FontWeight="SemiBold"/>
                            <ProgressBar x:Name="DownloadProgressBar"
                                         Height="24"
                                         Minimum="0"
                                         Maximum="100"
                                         Value="0"/>
                            <TextBlock x:Name="ProgressText"
                                       Text="0%"
                                       HorizontalAlignment="Center"
                                       Foreground="{DynamicResource TextFillColorSecondaryBrush}"/>
                        </StackPanel>
                    </ui:Card>
                </StackPanel>
            </ScrollViewer>

            <!-- Action Buttons -->
            <StackPanel Grid.Row="1"
                        Orientation="Horizontal"
                        HorizontalAlignment="Right"
                        Spacing="8"
                        Margin="0,16,0,0">
                <ui:Button x:Name="SkipButton"
                           Content="Skip This Version"
                           Click="SkipButton_Click"
                           Icon="DismissCircle24"
                           MinWidth="150"/>
                <ui:Button x:Name="LaterButton"
                           Content="Later"
                           Click="LaterButton_Click"
                           Icon="Clock24"
                           MinWidth="100"/>
                <ui:Button x:Name="DownloadButton"
                           Content="Download Now"
                           Click="DownloadButton_Click"
                           Icon="ArrowDownload24"
                           Appearance="Primary"
                           MinWidth="150"/>
            </StackPanel>
        </Grid>
    </Grid>
</ui:FluentWindow>
